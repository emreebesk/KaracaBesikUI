<a href="https://karacabesik-project1-api.azurewebsites.net/api/Download/download" download="50MB.zip" id="downloadLink">Download 50MB File</a>
<div id="result"></div>
<!-- Kullanıcıya dosya yükleme formu -->
<form id="uploadForm" enctype="multipart/form-data">
    <input type="file" id="fileInput" name="file" />
    <button type="submit">Upload File</button>
</form>
<div id="uploadResult"></div>

<script>
    document.getElementById('downloadLink').addEventListener('click', function() {
        var startTime = new Date().getTime();

        var xhr = new XMLHttpRequest();
        xhr.responseType = 'blob';
        xhr.onload = function() {
            var endTime = new Date().getTime();
            var duration = (endTime - startTime) / 1000; // Süre saniye cinsinden
            var fileSizeInBytes = 50 * 1024 * 1024; // 50 MB
            var speedInMbps = (fileSizeInBytes * 8) / (duration * 1000 * 1000); // Mbps cinsinden hız

            document.getElementById('result').innerHTML = 'İndirme Süresi: ' + duration.toFixed(2) + ' saniye<br>İndirme Hızı: ' + speedInMbps.toFixed(2) + ' Mbps';
        };
        xhr.open('GET', 'https://karacabesik-project1-api.azurewebsites.net/api/Download/download', true);
        xhr.send();
    });

    document.getElementById('uploadForm').addEventListener('submit', function(event) {
        event.preventDefault();
        var formData = new FormData();
        var fileInput = document.getElementById('fileInput');
        formData.append('file', fileInput.files[0]);

        var xhr = new XMLHttpRequest();
        xhr.open('POST', 'https://karacabesik-project1-api.azurewebsites.net/api/Upload', true);

        var startTime = new Date().getTime();
        xhr.onload = function() {
            var endTime = new Date().getTime();
            var duration = (endTime - startTime) / 1000; // Süre saniye cinsinden
            var fileSizeInBytes = fileInput.files[0].size;
            var speedInMbps = (fileSizeInBytes * 8) / (duration * 1000 * 1000); // Mbps cinsinden hız

            document.getElementById('uploadResult').innerHTML = 'Yükleme Süresi: ' + duration.toFixed(2) + ' saniye<br>Yükleme Hızı: ' + speedInMbps.toFixed(2) + ' Mbps';
        };
        xhr.send(formData);
    });


</script>
